(function(a){var b=function(){throw"UID cannot be instantiated"};b._nextID=0,b.get=function(){return b._nextID++},a.UID=b})(window),function(a){var b=function(){throw"Ticker cannot be instantiated."};b._listeners=[],b._pauseable=[],b._paused=!1,b._inited=!1,b._startTime=0,b._pausedTime=0,b._ticks=0,b._pausedTickers=0,b._interval=50,b._intervalID=null,b._lastTime=0,b._times=[],b.addListener=function(a,c){b._inited||(b._inited=!0,b._startTime=b._getTime(),b._times.push(0),b.setInterval(b._interval)),this.removeListener(a),b._pauseable[b._listeners.length]=c==null?!0:c,b._listeners.push(a)},b.removeListener=function(a){b._listeners!=null&&(a=b._listeners.indexOf(a),a!=-1&&(b._listeners.splice(a,1),b._pauseable.splice(a,1)))},b.removeAllListeners=function(){b._listeners=[],b._pauseable=[]},b.setInterval=function(a){b._intervalID!=null&&clearInterval(b._intervalID),b._lastTime=b.getTime(!1),b._interval=a,b._intervalID=setInterval(b._tick,a)},b.getInterval=function(){return b._interval},b.getFPS=function(){return 1e3/b._interval},b.setFPS=function(a){b.setInterval(1e3/a)},b.getMeasuredFPS=function(a){return b._times.length<2?-1:(a==null&&(a=b.getFPS()>>1),a=Math.min(b._times.length-1,a),1e3/((b._times[0]-b._times[a])/a))},b.setPaused=function(a){b._paused=a},b.getPaused=function(){return b._paused},b.getTime=function(a){return b._getTime()-b._startTime-(a?b._pausedTime:0)},b.getTicks=function(a){return b._ticks-(a?b._pausedTickers:0)},b._tick=function(){b._ticks++;var a=b.getTime(!1),c=a-b._lastTime,d=b._paused;d&&(b._pausedTickers++,b._pausedTime+=c),b._lastTime=a;for(var f=b._pauseable,g=b._listeners.slice(),h=g?g.length:0,i=0;i<h;i++){var j=f[i],k=g[i];k==null||d&&j||k.tick==null||k.tick(c)}b._times.unshift(a),b._times.length>100&&b._times.pop()},b._getTime=function(){return(new Date).getTime()},a.Ticker=b}(window),function(a){var b=function(a,b,c){this.initialize(a,b,c)},c=b.prototype;c.stageX=0,c.stageY=0,c.type=null,c.nativeEvent=null,c.onMouseMove=null,c.onMouseUp=null,c.target=null,c.initialize=function(a,b,c,d,e){this.type=a,this.stageX=b,this.stageY=c,this.target=d,this.nativeEvent=e},c.clone=function(){return new b(this.type,this.stageX,this.stageY,this.target,this.nativeEvent)},c.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},a.MouseEvent=b}(window),function(a){var b=function(a,b,c,d,e,f){this.initialize(a,b,c,d,e,f)},c=b.prototype;b.identity=null,b.DEG_TO_RAD=Math.PI/180,c.a=1,c.b=0,c.c=0,c.d=1,c.tx=0,c.ty=0,c.alpha=1,c.shadow=null,c.compositeOperation=null,c.initialize=function(a,b,c,d,e,f){a!=null&&(this.a=a),this.b=b||0,this.c=c||0,d!=null&&(this.d=d),this.tx=e||0,this.ty=f||0},c.prepend=function(a,b,c,d,e,f){var g=this.tx;if(a!=1||b!=0||c!=0||d!=1){var h=this.a,i=this.c;this.a=h*a+this.b*c,this.b=h*b+this.b*d,this.c=i*a+this.d*c,this.d=i*b+this.d*d}this.tx=g*a+this.ty*c+e,this.ty=g*b+this.ty*d+f},c.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;this.a=a*g+b*i,this.b=a*h+b*j,this.c=c*g+d*i,this.d=c*h+d*j,this.tx=e*g+f*i+this.tx,this.ty=e*h+f*j+this.ty},c.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty),this.prependProperties(a.alpha,a.shadow,a.compositeOperation)},c.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty),this.appendProperties(a.alpha,a.shadow,a.compositeOperation)},c.prependTransform=function(a,c,d,f,g,h,i,j,k){if(g%360){var l=g*b.DEG_TO_RAD;g=Math.cos(l),l=Math.sin(l)}else g=1,l=0;if(j||k)this.tx-=j,this.ty-=k;h||i?(h*=b.DEG_TO_RAD,i*=b.DEG_TO_RAD,this.prepend(g*d,l*d,-l*f,g*f,0,0),this.prepend(Math.cos(i),Math.sin(i),-Math.sin(h),Math.cos(h),a,c)):this.prepend(g*d,l*d,-l*f,g*f,a,c)},c.appendTransform=function(a,c,d,f,g,h,i,j,k){if(g%360){var l=g*b.DEG_TO_RAD;g=Math.cos(l),l=Math.sin(l)}else g=1,l=0;h||i?(h*=b.DEG_TO_RAD,i*=b.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(h),Math.cos(h),a,c),this.append(g*d,l*d,-l*f,g*f,0,0)):this.append(g*d,l*d,-l*f,g*f,a,c);if(j||k)this.tx-=j*this.a+k*this.c,this.ty-=j*this.b+k*this.d},c.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.a,d=this.c,e=this.tx;this.a=c*b-this.b*a,this.b=c*a+this.b*b,this.c=d*b-this.d*a,this.d=d*a+this.d*b,this.tx=e*b-this.ty*a,this.ty=e*a+this.ty*b},c.skew=function(a,c){a*=b.DEG_TO_RAD,c*=b.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(a),Math.cos(a),0,0)},c.scale=function(a,b){this.a*=a,this.d*=b,this.tx*=a,this.ty*=b},c.translate=function(a,b){this.tx+=a,this.ty+=b},c.identity=function(){this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null},c.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f},c.decompose=function(a){a==null&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a);return c==d?(a.rotation=d/b.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=c/b.DEG_TO_RAD,a.skewY=d/b.DEG_TO_RAD),a},c.reinitialize=function(a,b,c,d,e,f,g,h,i){return this.initialize(a,b,c,d,e,f),this.alpha=g||1,this.shadow=h,this.compositeOperation=i,this},c.appendProperties=function(a,b,c){this.alpha*=a,this.shadow=b||this.shadow,this.compositeOperation=c||this.compositeOperation},c.prependProperties=function(a,b,c){this.alpha*=a,this.shadow=this.shadow||b,this.compositeOperation=this.compositeOperation||c},c.clone=function(){var a=new b(this.a,this.b,this.c,this.d,this.tx,this.ty);return a.shadow=this.shadow,a.alpha=this.alpha,a.compositeOperation=this.compositeOperation,a},c.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},b.identity=new b(1,0,0,1,0,0),a.Matrix2D=b}(window),function(a){var b=function(a,b){this.initialize(a,b)},c=b.prototype;c.x=0,c.y=0,c.initialize=function(a,b){this.x=a==null?0:a,this.y=b==null?0:b},c.clone=function(){return new b(this.x,this.y)},c.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},a.Point=b}(window),function(a){var b=function(a,b,c,d){this.initialize(a,b,c,d)},c=b.prototype;c.x=0,c.y=0,c.width=0,c.height=0,c.initialize=function(a,b,c,d){this.x=a==null?0:a,this.y=b==null?0:b,this.width=c==null?0:c,this.height=d==null?0:d},c.clone=function(){return new b(this.x,this.y,this.width,this.height)},c.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},a.Rectangle=b}(window),function(a){var b=function(a,b,c,d){this.initialize(a,b,c,d)},c=b.prototype;b.identity=null,c.color=null,c.offsetX=0,c.offsetY=0,c.blur=0,c.initialize=function(a,b,c,d){this.color=a,this.offsetX=b,this.offsetY=c,this.blur=d},c.toString=function(){return"[Shadow]"},c.clone=function(){return new b(this.color,this.offsetX,this.offsetY,this.blur)},b.identity=new b(null,0,0,0),a.Shadow=b}(window),function(a){var b=function(a,b,c,d){this.initialize(a,b,c,d)},c=b.prototype;c.image=null,c.frameWidth=0,c.frameHeight=0,c.frameData=null,c.loop=!0,c.totalFrames=0,c.initialize=function(a,b,c,d){this.image=a,this.frameWidth=b,this.frameHeight=c,this.frameData=d},c.toString=function(){return"[SpriteSheet]"},c.clone=function(){var a=new b(this.image,this.frameWidth,this.frameHeight,this.frameData);return a.loop=this.loop,a.totalFrames=this.totalFrames,a},a.SpriteSheet=b}(window),function(a){function b(a,b){this.f=a,this.params=b}b.prototype.exec=function(a){this.f.apply(a,this.params)};var c=function(){this.initialize()},d=c.prototype;c.getRGB=function(a,b,c,d){return a!=null&&c==null&&(d=b,c=a&255,b=a>>8&255,a=a>>16&255),d==null?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},c.getHSL=function(a,b,c,d){return d==null?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},c.STROKE_CAPS_MAP=["butt","round","square"],c.STROKE_JOINTS_MAP=["miter","round","bevel"],c._ctx=document.createElement("canvas").getContext("2d"),c.beginCmd=new b(c._ctx.beginPath,[]),c.fillCmd=new b(c._ctx.fill,[]),c.strokeCmd=new b(c._ctx.stroke,[]),d._strokeInstructions=null,d._strokeStyleInstructions=null,d._fillInstructions=null,d._instructions=null,d._oldInstructions=null,d._activeInstructions=null,d._active=!1,d._dirty=!1,d.initialize=function(){this.clear(),this._ctx=c._ctx},d.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,c=0,d=b.length;c<d;c++)b[c].exec(a)},d.moveTo=function(a,c){return this._activeInstructions.push(new b(this._ctx.moveTo,[a,c])),this},d.lineTo=function(a,c){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.lineTo,[a,c])),this},d.arcTo=function(a,c,d,f,g){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.arcTo,[a,c,d,f,g])),this},d.arc=function(a,c,d,f,g,h){return this._dirty=this._active=!0,h==null&&(h=!1),this._activeInstructions.push(new b(this._ctx.arc,[a,c,d,f,g,h])),this},d.quadraticCurveTo=function(a,c,d,f){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.quadraticCurveTo,[a,c,d,f])),this},d.bezierCurveTo=function(a,c,d,f,g,h){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.bezierCurveTo,[a,c,d,f,g,h])),this},d.rect=function(a,c,d,f){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.rect,[a,c,d,f])),this},d.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new b(this._ctx.closePath,[]))),this},d.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},d.beginFill=function(a){return this._active&&this._newPath(),this._fillInstructions=a?[new b(this._setProp,["fillStyle",a])]:null,this},d.beginLinearGradientFill=function(a,c,d,f,g,h){this._active&&this._newPath(),d=this._ctx.createLinearGradient(d,f,g,h),f=0;for(g=a.length;f<g;f++)d.addColorStop(c[f],a[f]);return this._fillInstructions=[new b(this._setProp,["fillStyle",d])],this},d.beginRadialGradientFill=function(a,c,d,f,g,h,i,j){this._active&&this._newPath(),d=this._ctx.createRadialGradient(d,f,g,h,i,j),f=0;for(g=a.length;f<g;f++)d.addColorStop(c[f],a[f]);return this._fillInstructions=[new b(this._setProp,["fillStyle",d])],this},d.beginBitmapFill=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");return this._fillInstructions=[new b(this._setProp,["fillStyle",d])],this},d.endFill=function(){return this.beginFill(null),this},d.setStrokeStyle=function(a,d,f,g){return this._active&&this._newPath(),this._strokeStyleInstructions=[new b(this._setProp,["lineWidth",a==null?"1":a]),new b(this._setProp,["lineCap",d==null?"butt":isNaN(d)?d:c.STROKE_CAPS_MAP[d]]),new b(this._setProp,["lineJoin",f==null?"miter":isNaN(f)?f:c.STROKE_JOINTS_MAP[f]]),new b(this._setProp,["miterLimit",g==null?"10":g])],this},d.beginStroke=function(a){return this._active&&this._newPath(),this._strokeInstructions=a?[new b(this._setProp,["strokeStyle",a])]:null,this},d.beginLinearGradientStroke=function(a,c,d,f,g,h){this._active&&this._newPath(),d=this._ctx.createLinearGradient(d,f,g,h),f=0;for(g=a.length;f<g;f++)d.addColorStop(c[f],a[f]);return this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])],this},d.beginRadialGradientStroke=function(a,c,d,f,g,h,i,j){this._active&&this._newPath(),d=this._ctx.createRadialGradient(d,f,g,h,i,j),f=0;for(g=a.length;f<g;f++)d.addColorStop(c[f],a[f]);return this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])],this},d.beginBitmapStroke=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");return this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])],this},d.endStroke=function(){return this.beginStroke(null),this},d.curveTo=d.quadraticCurveTo,d.drawRect=d.rect,d.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e),this},d.drawRoundRectComplex=function(a,c,d,f,g,h,i,j){return this._dirty=this._active=!0,this._activeInstructions.push(new b(this._ctx.moveTo,[a+g,c]),new b(this._ctx.lineTo,[a+d-h,c]),new b(this._ctx.arc,[a+d-h,c+h,h,-Math.PI/2,0,!1]),new b(this._ctx.lineTo,[a+d,c+f-i]),new b(this._ctx.arc,[a+d-i,c+f-i,i,0,Math.PI/2,!1]),new b(this._ctx.lineTo,[a+j,c+f]),new b(this._ctx.arc,[a+j,c+f-j,j,Math.PI/2,Math.PI,!1]),new b(this._ctx.lineTo,[a,c+g]),new b(this._ctx.arc,[a+g,c+g,g,Math.PI,Math.PI*3/2,!1])),this},d.drawCircle=function(a,b,c){return this.arc(a,b,c,0,Math.PI*2),this},d.drawEllipse=function(a,c,d,f){this._dirty=this._active=!0;var g=d/2*.5522848,h=f/2*.5522848,i=a+d,j=c+f;return d=a+d/2,f=c+f/2,this._activeInstructions.push(new b(this._ctx.moveTo,[a,f]),new b(this._ctx.bezierCurveTo,[a,f-h,d-g,c,d,c]),new b(this._ctx.bezierCurveTo,[d+g,c,i,f-h,i,f]),new b(this._ctx.bezierCurveTo,[i,f+h,d+g,j,d,j]),new b(this._ctx.bezierCurveTo,[d-g,j,a,f+h,a,f])),this},d.drawPolyStar=function(a,c,d,f,g,h){this._dirty=this._active=!0,g==null&&(g=0),g=1-g,h==null?h=0:h/=180/Math.PI;var i=Math.PI/f;this._activeInstructions.push(new b(this._ctx.moveTo,[a+Math.cos(h)*d,c+Math.sin(h)*d]));for(var j=0;j<f;j++)h+=i,g!=1&&this._activeInstructions.push(new b(this._ctx.lineTo,[a+Math.cos(h)*d*g,c+Math.sin(h)*d*g])),h+=i,this._activeInstructions.push(new b(this._ctx.lineTo,[a+Math.cos(h)*d,c+Math.sin(h)*d]));return this},d.clone=function(){var a=new c;return a._instructions=this._instructions.slice(),a._activeInstructions=this._activeInstructions.slice(),a._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(a._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(a._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(a._strokeStyleInstructions=this._strokeStyleInstructions.slice()),a._active=this._active,a._dirty=this._dirty,a},d.toString=function(){return"[Graphics]"},d.mt=d.moveTo,d.lt=d.lineTo,d.at=d.arcTo,d.bt=d.bezierCurveTo,d.qt=d.quadraticCurveTo,d.a=d.arc,d.r=d.rect,d.cp=d.closePath,d.c=d.clear,d.f=d.beginFill,d.lf=d.beginLinearGradientFill,d.rf=d.beginRadialGradientFill,d.bf=d.beginBitmapFill,d.ef=d.endFill,d.ss=d.setStrokeStyle,d.s=d.beginStroke,d.ls=d.beginLinearGradientStroke,d.rs=d.beginRadialGradientStroke,d.bs=d.beginBitmapStroke,d.es=d.endStroke,d.dr=d.drawRect,d.rr=d.drawRoundRect,d.rc=d.drawRoundRectComplex,d.dc=d.drawCircle,d.de=d.drawEllipse,d.dp=d.drawPolyStar,d._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(c.beginCmd),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions)),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push(c.fillCmd),this._strokeInstructions&&this._instructions.push(c.strokeCmd)},d._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},d._setProp=function(a,b){this[a]=b},a.Graphics=c}(window),function(a){var b=function(){this.initialize()},c=b.prototype;b.suppressCrossDomainErrors=!1,b._hitTestCanvas=document.createElement("canvas"),b._hitTestCanvas.width=b._hitTestCanvas.height=1,b._hitTestContext=b._hitTestCanvas.getContext("2d"),c.alpha=1,c.cacheCanvas=null,c.id=-1,c.mouseEnabled=!0,c.name=null,c.parent=null,c.regX=0,c.regY=0,c.rotation=0,c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.shadow=null,c.visible=!0,c.x=0,c.y=0,c.compositeOperation=null,c.snapToPixel=!1,c.onPress=null,c.onClick=null,c.onDoubleClick=null,c.onMouseOver=null,c.onMouseOut=null,c.filters=null,c._cacheOffsetX=0,c._cacheOffsetY=0,c._matrix=null,c.initialize=function(){this.id=UID.get(),this._matrix=new Matrix2D},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0},c.draw=function(a,b){return b||!this.cacheCanvas?!1:(a.drawImage(this.cacheCanvas,this._cacheOffsetX,this._cacheOffsetY),!0)},c.cache=function(a,b,c,d){this.cacheCanvas==null&&(this.cacheCanvas=document.createElement("canvas"));var e=this.cacheCanvas.getContext("2d");this.cacheCanvas.width=c,this.cacheCanvas.height=d,e.setTransform(1,0,0,1,-a,-b),e.clearRect(0,0,c+1,d+1),this.draw(e,!0),this._cacheOffsetX=a,this._cacheOffsetY=b,this._applyFilters()},c.updateCache=function(a){if(this.cacheCanvas==null)throw"cache() must be called before updateCache()";var b=this.cacheCanvas.getContext("2d");b.setTransform(1,0,0,1,-this._cacheOffsetX,-this._cacheOffsetY),a?b.globalCompositeOperation=a:b.clearRect(0,0,this.cacheCanvas.width+1,this.cacheCanvas.height+1),this.draw(b,!0),a&&(b.globalCompositeOperation="source-over"),this._applyFilters()},c.uncache=function(){this.cacheCanvas=null,this._cacheOffsetX=this._cacheOffsetY=0},c.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof Stage?a:null},c.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return c==null?null:(c.append(1,0,0,1,a,b),new Point(c.tx,c.ty))},c.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return c==null?null:(c.invert(),c.append(1,0,0,1,a,b),new Point(c.tx,c.ty))},c.localToLocal=function(a,b,c){return a=this.localToGlobal(a,b),c.globalToLocal(a.x,a.y)},c.setTransform=function(a,b,c,d,e,f,g,h,i){this.x=a||0,this.y=b||0,this.scaleX=c==null?1:c,this.scaleY=d==null?1:d,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.regX=h||0,this.regY=i||0},c.getConcatenatedMatrix=function(a){a?a.identity():a=new Matrix2D;for(var b=this;b!=null;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY),a.prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a},c.hitTest=function(a,c){var d=b._hitTestContext,f=b._hitTestCanvas;return d.setTransform(1,0,0,1,-a,-c),this.draw(d),d=this._testHit(d),f.width=0,f.width=1,d},c.clone=function(){var a=new b;return this.cloneProps(a),a},c.toString=function(){return"[DisplayObject (name="+this.name+")]"},c.cloneProps=function(a){a.alpha=this.alpha,a.name=this.name,a.regX=this.regX,a.regY=this.regY,a.rotation=this.rotation,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.shadow=this.shadow,a.skewX=this.skewX,a.skewY=this.skewY,a.visible=this.visible,a.x=this.x,a.y=this.y,a.mouseEnabled=this.mouseEnabled,a.compositeOperation=this.compositeOperation},c.applyShadow=function(a,b){b=b||Shadow.identity,a.shadowColor=b.color,a.shadowOffsetX=b.offsetX,a.shadowOffsetY=b.offsetY,a.shadowBlur=b.blur},c._testHit=function(a){try{var c=a.getImageData(0,0,1,1).data[3]>1}catch(d){if(!b.suppressCrossDomainErrors)throw"An error has occured. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},c._applyFilters=function(){if(!!this.filters&&this.filters.length!=0&&!!this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;e<a;e++)this.filters[e].applyFilter(b,0,0,c,d)},a.DisplayObject=b}(window),function(a){var b=function(){this.initialize()},c=b.prototype=new DisplayObject;c.children=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(){this.DisplayObject_initialize(),this.children=[]},c.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0},c.DisplayObject_draw=c.draw,c.draw=function(a,c,d){var f=Stage._snapToPixelEnabled;if(this.DisplayObject_draw(a,c))return!0;d=d||this._matrix.reinitialize(1,0,0,1,0,0,this.alpha,this.shadow,this.compositeOperation),c=this.children.length;for(var g=this.children.slice(0),h=0;h<c;h++){var i=g[h];i.tick&&i.tick();if(i.isVisible()){var j=!1,k=i._matrix.reinitialize(d.a,d.b,d.c,d.d,d.tx,d.ty,d.alpha,d.shadow,d.compositeOperation);k.appendTransform(i.x,i.y,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY),k.appendProperties(i.alpha,i.shadow,i.compositeOperation),i instanceof b&&i.cacheCanvas==null||(f&&i.snapToPixel&&k.a==1&&k.b==0&&k.c==0&&k.d==1?a.setTransform(k.a,k.b,k.c,k.d,k.tx+.5|0,k.ty+.5|0):a.setTransform(k.a,k.b,k.c,k.d,k.tx,k.ty),a.globalAlpha=k.alpha,a.globalCompositeOperation=k.compositeOperation||"source-over",(j=k.shadow)&&this.applyShadow(a,j)),i.draw(a,!1,k),j&&this.applyShadow(a)}}return!0},c.addChild=function(a){var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a},c.addChildAt=function(a,b){var c=arguments.length;if(c>2){b=arguments[d-1];for(var d=0;d<c-1;d++)this.addChildAt(arguments[d],b+d);return arguments[c-2]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a},c.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;d<b;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))},c.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;d<b;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});var e=!0;for(d=0;d<b;d++)e=e&&this.removeChildAt(c[d]);return e}return a<0||a>this.children.length-1?!1:(b=this.children[a],b!=null&&(b.parent=null),this.children.splice(a,1),!0)},c.removeAllChildren=function(){for(;this.children.length;)this.removeChildAt(0)},c.getChildAt=function(a){return this.children[a]},c.sortChildren=function(a){this.children.sort(a)},c.getChildIndex=function(a){return this.children.indexOf(a)},c.getNumChildren=function(){return this.children.length},c.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},c.hitTest=function(a,b){return this.getObjectUnderPoint(a,b)!=null},c.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);return this._getObjectsUnderPoint(d.x,d.y,c),c},c.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)},c.clone=function(a){var c=new b;this.cloneProps(c);if(a)for(var d=c.children=[],f=0,g=this.children.length;f<g;f++){var h=this.children[f].clone(a);h.parent=c,d.push(h)}return c},c.toString=function(){return"[Container (name="+this.name+")]"},c._getObjectsUnderPoint=function(a,c,d,f){var g=DisplayObject._hitTestContext,h=DisplayObject._hitTestCanvas,i=this._matrix,j=f&1&&(this.onPress||this.onClick||this.onDoubleClick)||f&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas){this.getConcatenatedMatrix(i),g.setTransform(i.a,i.b,i.c,i.d,i.tx-a,i.ty-c),g.globalAlpha=i.alpha,this.draw(g);if(!this._testHit(g))return null;h.width=0,h.width=1;if(j)return this}for(var k=this.children.length-1;k>=0;k--){var l=this.children[k];if(l.isVisible()&&l.mouseEnabled)if(l instanceof b)if(j){if(l=l._getObjectsUnderPoint(a,c))return this}else{l=l._getObjectsUnderPoint(a,c,d,f);if(!d&&l)return l}else if(!f||j||f&1&&(l.onPress||l.onClick||l.onDoubleClick)||f&2&&(l.onMouseOver||l.onMouseOut)){l.getConcatenatedMatrix(i),g.setTransform(i.a,i.b,i.c,i.d,i.tx-a,i.ty-c),g.globalAlpha=i.alpha,l.draw(g);if(this._testHit(g)){h.width=0,h.width=1;if(j)return this;if(d)d.push(l);else return l}}}return null},a.Container=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new Container;b._snapToPixelEnabled=!1,c.autoClear=!0,c.canvas=null,c.mouseX=null,c.mouseY=null,c.onMouseMove=null,c.onMouseUp=null,c.onMouseDown=null,c.snapToPixelEnabled=!1,c.mouseInBounds=!1,c._activeMouseEvent=null,c._activeMouseTarget=null,c._mouseOverIntervalID=null,c._mouseOverX=0,c._mouseOverY=0,c._mouseOverTarget=null,c.Container_initialize=c.initialize,c.initialize=function(a){this.Container_initialize(),this.canvas=a,this._enableMouseEvents(!0)},c.update=function(){this.canvas&&(this.autoClear&&this.clear(),b._snapToPixelEnabled=this.snapToPixelEnabled,this.draw(this.canvas.getContext("2d"),!1,this.getConcatenatedMatrix(this._matrix)))},c.tick=c.update,c.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width,this.canvas.height)}},c.toDataURL=function(a,b){b||(b="image/png");var c=this.canvas.getContext("2d"),d=this.canvas.width,e=this.canvas.height,f;if(a){f=c.getImageData(0,0,d,e);var g=c.globalCompositeOperation;c.globalCompositeOperation="destination-over",c.fillStyle=a,c.fillRect(0,0,d,e)}var h=this.canvas.toDataURL(b);return a&&(c.clearRect(0,0,d,e),c.putImageData(f,0,0),c.globalCompositeOperation=g),h},c.enableMouseOver=function(a){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(!(a<=0)){var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a)),this._mouseOverX=NaN,this._mouseOverTarget=null}},c.clone=function(){var a=new b(null);return this.cloneProps(a),a},c.toString=function(){return"[Stage (name="+this.name+")]"},c._enableMouseEvents=function(){var b=this,c=a.addEventListener?a:document;c.addEventListener("mouseup",function(a){b._handleMouseUp(a)},!1),c.addEventListener("mousemove",function(a){b._handleMouseMove(a)},!1),c.addEventListener("dblclick",function(a){b._handleDoubleClick(a)},!1),this.canvas.addEventListener("mousedown",function(a){b._handleMouseDown(a)},!1)},c._handleMouseMove=function(b){if(this.canvas){b||(b=a.event);var c=this.mouseInBounds;this._updateMousePosition(b.pageX,b.pageY);if(c||this.mouseInBounds)b=new MouseEvent("onMouseMove",this.mouseX,this.mouseY,this,b),this.onMouseMove&&this.onMouseMove(b),this._activeMouseEvent&&this._activeMouseEvent.onMouseMove&&this._activeMouseEvent.onMouseMove(b)}else this.mouseX=this.mouseY=null},c._updateMousePosition=function(a,b){var c=this.canvas;do a-=c.offsetLeft,b-=c.offsetTop;while(c=c.offsetParent);if(this.mouseInBounds=a>=0&&b>=0&&a<this.canvas.width&&b<this.canvas.height)this.mouseX=a,this.mouseY=b},c._handleMouseUp=function(a){var b=new MouseEvent("onMouseUp",this.mouseX,this.mouseY,this,a);this.onMouseUp&&this.onMouseUp(b),this._activeMouseEvent&&this._activeMouseEvent.onMouseUp&&this._activeMouseEvent.onMouseUp(b),this._activeMouseTarget&&this._activeMouseTarget.onClick&&this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0,this._mouseOverIntervalID?3:1)==this._activeMouseTarget&&this._activeMouseTarget.onClick(new MouseEvent("onClick",this.mouseX,this.mouseY,this._activeMouseTarget,a)),this._activeMouseEvent=this._activeMouseTarget=null},c._handleMouseDown=function(a){this.onMouseDown&&this.onMouseDown(new MouseEvent("onMouseDown",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(b){if(b.onPress instanceof Function){a=new MouseEvent("onPress",this.mouseX,this.mouseY,b,a),b.onPress(a);if(a.onMouseMove||a.onMouseUp)this._activeMouseEvent=a}this._activeMouseTarget=b}},c._testMouseOver=function(){if(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds){var a=null;this.mouseInBounds&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY),this._mouseOverTarget!=a&&(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut&&this._mouseOverTarget.onMouseOut(new MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget)),a&&a.onMouseOver&&a.onMouseOver(new MouseEvent("onMouseOver",this.mouseX,this.mouseY,a)),this._mouseOverTarget=a)}},c._handleDoubleClick=function(a){this.onDoubleClick&&this.onDoubleClick(new MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);b&&b.onDoubleClick instanceof Function&&b.onDoubleClick(new MouseEvent("onPress",this.mouseX,this.mouseY,b,a))},a.Stage=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.image=null,c.snapToPixel=!0,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){this.DisplayObject_initialize(),typeof a=="string"?(this.image=new Image,this.image.src=a):this.image=a},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext)},c.DisplayObject_draw=c.draw,c.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(a.drawImage(this.image,0,0),!0)},c.clone=function(){var a=new b(this.image);return this.cloneProps(a),a},c.toString=function(){return"[Bitmap (name="+this.name+")]"},a.Bitmap=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.callback=null,c.currentFrame=-1,c.currentSequence=null,c.currentEndFrame=null,c.currentStartFrame=null,c.nextSequence=null,c.paused=!1,c.spriteSheet=null,c.snapToPixel=!0,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){this.DisplayObject_initialize(),this.spriteSheet=a},c.isVisible=function(){var a=this.spriteSheet?this.spriteSheet.image:null;return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&a&&this.currentFrame>=0&&(a.complete||a.getContext)},c.DisplayObject_draw=c.draw,c.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=this.spriteSheet.image,d=this.spriteSheet.frameWidth,e=this.spriteSheet.frameHeight,f=c.width/d|0,g=c.height/e|0;return this.currentEndFrame!=null?this.currentFrame>this.currentEndFrame&&(this.nextSequence?this._goto(this.nextSequence):(this.paused=!0,this.currentFrame=this.currentEndFrame),this.callback&&this.callback(this)):(g=this.spriteSheet.totalFrames||f*g,this.currentFrame>=g&&(this.spriteSheet.loop?this.currentFrame=0:(this.currentFrame=g-1,this.paused=!0),this.callback&&this.callback(this))),this.currentFrame>=0&&a.drawImage(c,d*(this.currentFrame%f),e*(this.currentFrame/f|0),d,e,0,0,d,e),!0},c.tick=function(){this.currentFrame==-1&&this.spriteSheet.frameData&&(this.paused=!0),this.paused||this.currentFrame++},c.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},c.gotoAndStop=function(a){this.paused=!0,this._goto(a)},c.clone=function(){var a=new b(this.spriteSheet);return this.cloneProps(a),a},c.toString=function(){return"[BitmapSequence (name="+this.name+")]"},c.DisplayObject_cloneProps=c.cloneProps,c.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.callback=this.callback,a.currentFrame=this.currentFrame,a.currentStartFrame=this.currentStartFrame,a.currentEndFrame=this.currentEndFrame,a.currentSequence=this.currentSequence,a.nextSequence=this.nextSequence,a.paused=this.paused,a.frameData=this.frameData},c._goto=function(a){if(isNaN(a))if(a==this.currentSequence)this.currentFrame=this.currentStartFrame;else{var b=this.spriteSheet.frameData[a];b instanceof Array?(this.currentFrame=this.currentStartFrame=b[0],this.currentSequence=a,this.currentEndFrame=b[1],this.currentEndFrame==null&&(this.currentEndFrame=this.currentStartFrame),this.currentEndFrame==null&&(this.currentEndFrame=this.currentFrame),this.nextSequence=b[2],this.nextSequence==null?this.nextSequence=this.currentSequence:this.nextSequence==!1&&(this.nextSequence=null)):(this.currentSequence=this.nextSequence=null,this.currentEndFrame=this.currentFrame=this.currentStartFrame=b)}else this.currentSequence=this.nextSequence=this.currentEndFrame=null,this.currentStartFrame=0,this.currentFrame=a},a.BitmapSequence=b}(window),function(a){var b=function(a){this.initialize(a)},c=b.prototype=new DisplayObject;c.graphics=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(a){this.DisplayObject_initialize(),this.graphics=a?a:new Graphics},c.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics},c.DisplayObject_draw=c.draw,c.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.graphics.draw(a),!0)},c.clone=function(a){return a=new b(a&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(a),a},c.toString=function(){return"[Shape (name="+this.name+")]"},a.Shape=b}(window),function(a){var b=function(a,b,c){this.initialize(a,b,c)},c=b.prototype=new DisplayObject;b._workingContext=document.createElement("canvas").getContext("2d"),c.text="",c.font=null,c.color=null,c.textAlign=null,c.textBaseline=null,c.maxWidth=null,c.outline=!1,c.lineHeight=null,c.lineWidth=null,c.DisplayObject_initialize=c.initialize,c.initialize=function(a,b,c){this.DisplayObject_initialize(),this.text=a,this.font=b,this.color=c?c:"#000"},c.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!="")},c.DisplayObject_draw=c.draw,c.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.outline?a.strokeStyle=this.color:a.fillStyle=this.color,a.font=this.font,a.textAlign=this.textAlign?this.textAlign:"start",a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight==null?this.getMeasuredLineHeight():this.lineHeight,e=0,f=0,g=c.length;f<g;f++){var h=a.measureText(c[f]).width;if(this.lineWidth==null||h<this.lineWidth)this._drawTextLine(a,c[f],e);else{h=c[f].split(/(\s)/);for(var i=h[0],j=1,k=h.length;j<k;j+=2)a.measureText(i+h[j]+h[j+1]).width>this.lineWidth?(this._drawTextLine(a,i,e),e+=d,i=h[j+1]):i+=h[j]+h[j+1];this._drawTextLine(a,i,e)}e+=d}return!0},c.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},c.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2},c.clone=function(){var a=new b(this.text,this.font,this.color);return this.cloneProps(a),a},c.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},c.DisplayObject_cloneProps=c.cloneProps,c.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.textAlign=this.textAlign,a.textBaseline=this.textBaseline,a.maxWidth=this.maxWidth,a.outline=this.outline,a.lineHeight=this.lineHeight,a.lineWidth=this.lineWidth},c._getWorkingContext=function(){var a=b._workingContext;return a.font=this.font,a.textAlign=this.textAlign?this.textAlign:"start",a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic",a},c._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth):a.fillText(b,0,c,this.maxWidth)},a.Text=b}(window),function(a){var b=function(){throw"SpriteSheetUtils cannot be instantiated"};b._workingCanvas=document.createElement("canvas"),b._workingContext=b._workingCanvas.getContext("2d"),b.flip=function(a,c){var d=a.image,f=a.frameData,g=a.frameWidth,h=a.frameHeight,i=d.width/g|0,j=d.height/h|0,k=i*j,l={},m,n;for(n in f)m=f[n],m instanceof Array&&(m=m.slice(0)),l[n]=m;var o=[],p=0,q=0;for(n in c){m=c[n],m=f[m[0]];if(m!=null){if(m instanceof Array){var r=m[0],s=m[1];s==null&&(s=r)}else r=s=m;o[q]=n,o[q+1]=r,o[q+2]=s,p+=s-r+1,q+=4}}f=b._workingCanvas,f.width=d.width,f.height=Math.ceil(j+p/i)*h,p=b._workingContext,p.drawImage(d,0,0,i*g,j*h,0,0,i*g,j*h),j=k-1;for(q=0;q<o.length;q+=4){n=o[q],r=o[q+1],s=o[q+2],m=c[n],k=m[1]?-1:1;for(var t=m[2]?-1:1,u=k==-1?g:0,v=t==-1?h:0,w=r;w<=s;w++)j++,p.save(),p.translate(j%i*g+u,(j/i|0)*h+v),p.scale(k,t),p.drawImage(d,w%i*g,(w/i|0)*h,g,h,0,0,g,h),p.restore();l[n]=[j-(s-r),j,m[3]]}return d=new Image,d.src=f.toDataURL("image/png"),new SpriteSheet(d.width>0?d:f,g,h,l)},b.frameDataToString=function(a){var b="",c=0,d=0,e=0,f,g;for(g in a){e++,f=a[g];if(f instanceof Array){var h=f[0],i=f[1];i==null&&(i=h),f=f[2],f==null&&(f=g)}else h=i=f,f=g;b+="\n\t"+g+", start="+h+", end="+i+", next="+f,f==!1?b+=" (stop)":f==g&&(b+=" (loop)"),i>c&&(c=i),h<d&&(d=h)}return e+" sequences, min="+d+", max="+c+b},b.extractFrame=function(a,c){var d=a.image,f=a.frameWidth,g=a.frameHeight,h=d.width/f|0;if(isNaN(c)){var i=a.frameData[c];c=i instanceof Array?i[0]:i}return i=b._workingCanvas,i.width=f,i.height=g,b._workingContext.drawImage(d,c%h*f,(c/h|0)*g,f,g,0,0,f,g),d=new Image,d.src=i.toDataURL("image/png"),d},a.SpriteSheetUtils=b}(window)