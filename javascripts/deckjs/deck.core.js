(function(a,b,c,d){var e,f,g={change:"deck.change",initialize:"deck.init"},h={},i=a(c),j=function(){var b=h.classes,c=h.selectors.container,d=a(c),g=d.data("onSlide"),i=a();d.removeClass(b.onPrefix+g).addClass(b.onPrefix+f).data("onSlide",f),a("."+b.current).parentsUntil(c).removeClass(b.childCurrent),e[f].parentsUntil(c).addClass(b.childCurrent),a.each(e,function(a,b){i=i.add(b)}),i.removeClass([b.before,b.previous,b.current,b.next,b.after].join(" ")),e[f].addClass(b.current),f>0&&e[f-1].addClass(b.previous),f+1<e.length&&e[f+1].addClass(b.next),f>1&&a.each(e.slice(0,f-1),function(a,c){c.addClass(b.before)}),f+2<e.length&&a.each(e.slice(f+2),function(a,c){c.addClass(b.after)})},k={init:function(c,l){var m,n,o,p=function(a){a.stopPropagation()};h=a.extend(!0,{},a[b].defaults,l),e=[],f=0,n=a[b]("getContainer"),o=h.touch.swipeTolerance,n.addClass(h.classes.loading),a.isArray(c)?a.each(c,function(b,c){e.push(a(c))}):a(c).each(function(b,c){e.push(a(c))}),i.unbind("keydown.deck").bind("keydown.deck",function(b){if(b.which===h.keys.next||a.inArray(b.which,h.keys.next)>-1)k.next(),b.preventDefault();else if(b.which===h.keys.previous||a.inArray(b.which,h.keys.previous)>-1)k.prev(),b.preventDefault()}),n.unbind("touchstart.deck").bind("touchstart.deck",function(b){m||(m=a.extend({},b.originalEvent.targetTouches[0]))}).unbind("touchmove.deck").bind("touchmove.deck",function(c){a.each(c.originalEvent.changedTouches,function(c,e){if(m&&e.identifier===m.identifier){if(e.screenX-m.screenX>o||e.screenY-m.screenY>o)a[b]("prev"),m=d;else if(e.screenX-m.screenX<-1*o||e.screenY-m.screenY<-1*o)a[b]("next"),m=d;return!1}}),c.preventDefault()}).unbind("touchend.deck").bind("touchend.deck",function(b){a.each(b.originalEvent.changedTouches,function(a,b){m&&b.identifier===m.identifier&&(m=d)})}).scrollLeft(0).scrollTop(0).undelegate("input, textarea, select, button, meter, progress, [contentEditable]","keydown",p).delegate("input, textarea, select, button, meter, progress, [contentEditable]","keydown",p),a.each(e,function(c,d){d.unbind("webkitTransitionEnd.deck").bind("webkitTransitionEnd.deck",function(c){if(d.hasClass(a[b]("getOptions").classes.current)){var e=a(this).find("iframe").css("opacity",0);window.setTimeout(function(){e.css("opacity",1)},100)}})}),j(),n.removeClass(h.classes.loading),i.trigger(g.initialize)},go:function(a){if(typeof a!="number"||a<0||a>=e.length)return;i.trigger(g.change,[f,a]),f=a,j()},next:function(){k.go(f+1)},prev:function(){k.go(f-1)},getSlide:function(a){var b=typeof a!="undefined"?a:f;return typeof b!="number"||b<0||b>=e.length?null:e[b]},getSlides:function(){return e},getContainer:function(){return a(h.selectors.container)},getOptions:function(){return h},extend:function(a,b){k[a]=b}};a[b]=function(a,b){return k[a]?k[a].apply(this,Array.prototype.slice.call(arguments,1)):k.init(a,b)},a[b].defaults={classes:{after:"deck-after",before:"deck-before",childCurrent:"deck-child-current",current:"deck-current",loading:"deck-loading",next:"deck-next",onPrefix:"on-slide-",previous:"deck-previous"},selectors:{container:".deck-container"},keys:{next:[13,32,34,39,40],previous:[8,33,37,38]},touch:{swipeTolerance:60}},i.ready(function(){a("html").addClass("ready")}),i.bind("deck.change",function(c,d,e){var f=a[b]("getSlide",d).find("iframe"),g=a[b]("getSlide",e).find("iframe");f.each(function(){var b=a(this);b.data("deck-src",b.attr("src")).attr("src","")}),g.each(function(){var b=a(this),c=b.data("deck-src");c&&b.attr("src",c)})})})(jQuery,"deck",document)